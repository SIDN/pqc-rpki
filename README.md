# PQC for the RPKI

This repository contains the code and data used for the thesis "Post-Quantum Cryptography for the RPKI".

You can find the thesis (TODO: here), and the shorter corresponding blog post [here](https://www.sidnlabs.nl/en/news-and-blogs/thesis-post-quantum-cryptography-for-the-rpki).

## Proof-of-concept

We have created a proof-of-concept implementation of post-quantum signatures in the RPKI using
a modified version of NLnet Labs' [Krill](https://github.com/NLnetLabs/krill) and [Routinator](https://github.com/NLnetLabs/routinator) software.

These implementations are available in the separate forked repositories [SIDN/pqc-krill](https://github.com/SIDN/pqc-krill), [SIDN/pqc-routinator](https://github.com/SIDN/pqc-routinator), and the underlying library [SIDN/pqc-rpki-rs](https://github.com/SIDN/pqc-rpki-rs).

Our modified Krill and Routinator can be installed with:

```bash
cargo install \
    --git https://github.com/SIDN/pqc-routinator \
    --branch main routinator --locked

cargo install \
    --git https://github.com/SIDN/pqc-krill \
    --branch main krill --locked
```

In this repository, we provide scripts to try out the proof-of-concept in two different scenarios.
An example of the output of these scripts (as we have used to verify that the implementation works as intended) is already included in the `data/` directory, but can also be regenerated by running the scripts.

### Steady state

In the steady state scenario, we create an RPKI hierarchy from scratch, with every party using the same post-quantum signature scheme.

To run this, install our modified Krill and Routinator, and run `sh steadystate-pq.sh`. This will output a snapshot of the RPKI and corresponding validation results in `data/steadystate-pq/`.

### Single CA migration

In the single CA migration scenario, we create a hierarchy that initially uses RSA everywhere. Then, one CA migrates to post-quantum signatures, while the rest of the hierarchy continues to use RSA. This demonstrates algorithm rollover using a normal RFC6489 key rollover (`krillc rollover`), and both RSA-on-PQ and PQ-on-RSA mixed certificates.

To run this, install our modified Krill and Routinator, and run `sh singlecaroll.sh`. This will output several snapshots of the RPKI and corresponding validation results in `data/singlecaroll/`.

## Other content

We also provide the code and data used to generate several tables in chapter 4 and the appendices of the thesis, under `algorithm-selection/`.
